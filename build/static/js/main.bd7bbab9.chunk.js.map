{"version":3,"sources":["services/persons.js","components/Persons.js","components/PersonForm.js","components/Search.js","App.js","index.js"],"names":["baseUrl","console","log","axios","get","newObject","post","id","put","Persons","person","delPerson","name","number","onClick","PersonForm","addName","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","value","onChange","type","Search","searchstring","handleSearchChange","ErrorNotification","message","className","InfoNotification","App","useState","persons","setPersons","persons2","setPersons2","setNewName","setNewNumber","setNewString","errorMessage","setErrorMessage","infoMessage","setInfoMessage","useEffect","personService","then","response","data","length","event","target","result","window","confirm","url","deleteid","parseInt","deleteperson","find","p","delete","setTimeout","filter","toLowerCase","includes","preventDefault","tablecheck","map","n","indexOf","personObject","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bd7bbab9.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'https://arcane-shelf-21967.herokuapp.com/api/persons'\n\nconst getAll = () => {\n    console.log(\"getall\")\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update \n}","import React from 'react'\n\nconst Persons = ({ person, delPerson }) => {\n  return (\n    <div>\n      {person.name} {person.number}<button id={person.id} onClick={delPerson}>Delete</button>\n    </div>\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst PersonForm = ({ addName, newName, newNumber, handleNameChange, handleNumberChange }) => {\n\n    return (\n    <form onSubmit={addName}>\n      <div>\n        name: <input \n              value={newName}\n              onChange={handleNameChange}\n              />\n      </div>\n      <div>\n        number: <input \n              value={newNumber}\n              onChange={handleNumberChange}\n              />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Search = ({ searchstring, handleSearchChange }) => {\n\n    return (\n    <div>\n      <form>\n        <div>\n          search: <input \n            value={searchstring}\n            onChange={handleSearchChange}\n            />\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default Search","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport './App.css';\nimport personService from './services/persons'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Search from './components/Search'\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst InfoNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"info\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ persons2, setPersons2] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber  ] = useState('')\n  const [ searchstring, setNewString  ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState('')\n  const [ infoMessage, setInfoMessage ] = useState('')\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n    .getAll()\n    .then(response => {\n      setPersons(response.data)\n      setPersons2(response.data)\n    })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const addName = (event) => {\n    event.preventDefault()\n    console.log('add clicked', newName)\n\n    let tablecheck = persons.map(n => n.name).indexOf(newName)\n    const person = persons.find(p => p.name === newName)\n\n    console.log(tablecheck, person)\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (tablecheck < 0) {\n\n    personService\n      .create(personObject)\n      .then(response => {\n        setPersons2(persons.concat(response.data))\n        setPersons(persons.concat(response.data))\n        setNewName('')\n        setNewNumber('')\n        setInfoMessage(\n          `${newName} added`\n        )\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 5000)\n      })\n\n    }\n    else {\n      let result = window.confirm(`${newName} exists already. Replace number?`);\n      console.log(\"replace\", result)\n      \n      if (result){\n        personService\n        .update(person.id, personObject)\n        .then(response => {\n          setNewName('')\n          setNewNumber('')\n          setInfoMessage(\n            `${newName} updated`\n          )\n          setTimeout(() => {\n            setInfoMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(\"error\")\n          setErrorMessage(\n            `${person.name} was already removed from server`\n          )\n          personService\n          .getAll()\n          .then(response => {\n            setPersons(response.data)\n            setPersons2(response.data)\n          })\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      }\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const delPerson = (event) => {\n    console.log(\"delete\", event.target.id, typeof(event.target.id))\n\n    let result = window.confirm(`Delete?`);\n    console.log(result)\n\n    if (result){\n      const url = `https://arcane-shelf-21967.herokuapp.com/api/persons/${event.target.id}`\n      const deleteid = parseInt(event.target.id)\n      const deleteperson = persons.find(p => p.id === deleteid)\n      \n      console.log(\"del\",deleteperson, deleteid)\n\n      axios.delete(url).then(response => {\n\n        setInfoMessage(\n          `${deleteperson.name} deleted`\n        )\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 5000)\n\n        setPersons(persons.filter(person => person.id !== deleteid))\n        setPersons2(persons2.filter(person => person.id !== deleteid))\n        console.log(\"pl\", persons.length, persons2.length)\n      })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    console.log(\"etv\", event.target.value)\n    setNewString(event.target.value)\n    setPersons2(persons)\n\n    console.log(\"len\", event.target.value.length)\n    let result = persons\n\n    result = result.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase()));\n    console.log(\"re\", result)\n    console.log(\"pe\", persons)\n    setPersons2(result)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification message={errorMessage} />\n      <InfoNotification message={infoMessage} />\n      <Search handleSearchChange={handleSearchChange} searchstring={searchstring}/>\n      <h2>Add new</h2>\n      <PersonForm addName={addName} newName={newName} newNumber={newNumber} handleNumberChange={handleNumberChange} handleNameChange={handleNameChange}/>\n      <h2>Numbers</h2>\n      {persons2.map(person => \n      <Persons key={person.id} person={person} delPerson={delPerson}/>\n      )}\n    </div>\n  )}\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}